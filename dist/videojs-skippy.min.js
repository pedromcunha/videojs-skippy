/**
 * videojs-skippy
 * @version 1.0.4
 * @copyright 2016 Pedro <pedro@younow.com>
 * @license MIT
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.videojsSkippy=e()}}(function(){return function e(n,t,r){function o(u,f){if(!t[u]){if(!n[u]){var d="function"==typeof require&&require;if(!f&&d)return d(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var a=t[u]={exports:{}};n[u][0].call(a.exports,function(e){var t=n[u][1][e];return o(t?t:e)},a,a.exports,e,n,t,r)}return t[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,n,t){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,i=r(o),u={},f=0,d=!1,s=!1,a=void 0,c=0,l=0,p=!1,m={},y="",v=0,g=10,h=!1,w=0,T=!1,x=function(e){w>=4?j("max retry count!"):d!=l?(E(1e3*(w||1),e),p=1,j("time has progressed since last failure, retry in "+1e3*(w||1)+"seconds")):2>p?(j("no progress recover"),E(3e3,e),p=2):j("three errors without progressing")},b=function(e,n){var t=void 0,r=e.tech_.hls;if(r&&(a=r.playlists.media()),a.segments){d===!1&&(d=f),t=d!==!1?Math.floor(d):Math.floor(f),m[n]||(m[n]={});var o=Math.ceil(f);o%2!==0&&(o+=1),m[n][t]=a.segments[o/a.targetDuration>0?o/a.targetDuration-1:o/a.targetDuration].duration+o+.1,M(n,e)}},_=function(e){var n=m[y],t=Math.floor(f);n&&n[t]&&e.currentTime(n[t]),e.currentTime()>d&&!s&&(s=setTimeout(function(){d=!1},500))},M=function(e,n){n.reset(),n.src({src:e,type:"application/x-mpegURL"}),n.play()},E=function(e,n){w++,setTimeout(function(){h?h():M(y,n),window.setTimeout(function(){w--},1e4)},e>0?e:0)},j=function(e){T&&console.log(e)},O=function(e,n){e.addClass("vjs-skippy"),y=e.el_.children[0].children[0].src,e.on("timeupdate",function(n){if(e){if(!d&&e.currentTime&&(f=e.currentTime()),e.paused()||e.currentTime()!==l)c=0;else if(c++,c>=5)if(j("Stuckstuck enabled: "+c),e.duration()===1/0)E(0,e);else{var t=2*(Math.floor(e.currentTime()/2)+1)+.1;e.currentTime(t),c=0}l=e.currentTime(),_(e)}}),e.on("error",function(){if(v++,e&&"application/x-mpegURL"===e.currentType_&&g>=v){var n=y;clearTimeout(s),s=!1,e.duration()===1/0?x(e):b(e,n)}})},k=function(e){var n=this;this.ready(function(){e||(e={}),e.maxErrors&&(g=e.maxErrors),e.onLiveError&&(h=e.onLiveError),e.debug&&(T=e.debug),O(n,i["default"].mergeOptions(u,e))})};i["default"].plugin("skippy",k),k.VERSION="1.0.4",t["default"]=k,n.exports=t["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});